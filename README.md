# storeæ•°æ®
 storeæ•°æ®é»˜è®¤åˆ·æ–°é¡µé¢æ¸…ç©º
 storeæ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼š
 å°†æ•°æ®ä¿å­˜åˆ° localStorage ä¸­ æˆ– sessionStorage ä¸­
  sessionStorage å­˜å‚¨çš„æ•°æ®ï¼Œå…³é—­é¡µé¢åŽæ•°æ®å°±ä¼šæ¶ˆå¤±
  localStorage å­˜å‚¨çš„æ•°æ®ï¼Œå…³é—­é¡µé¢åŽæ•°æ®ä¸ä¼šæ¶ˆå¤±

Web å¼€å‘ä¸­ï¼ŒlocalStorage å’Œ sessionStorage æ˜¯æµè§ˆå™¨æä¾›çš„ä¸¤ç§å®¢æˆ·ç«¯å­˜å‚¨æœºåˆ¶ï¼Œå®ƒä»¬éƒ½å±žäºŽ Web Storage APIï¼Œç”¨äºŽåœ¨æµè§ˆå™¨ç«¯æŒä¹…åŒ–ä¿å­˜æ•°æ®ã€‚è™½ç„¶å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼ï¼Œä½†äºŒè€…åœ¨ ç”Ÿå‘½å‘¨æœŸã€ä½œç”¨åŸŸå’Œé€‚ç”¨åœºæ™¯ ä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ã€‚

ðŸ§© ä¸€ã€åŸºæœ¬æ¦‚å¿µå¯¹æ¯”

![img.png](img.png)

ðŸ•’ äºŒã€ç”Ÿå‘½å‘¨æœŸå·®å¼‚è¯¦è§£
âœ… localStorage
æŒä¹…æ€§ï¼šä¸€æ—¦å†™å…¥ï¼Œé™¤éžç”¨æˆ·ä¸»åŠ¨æ¸…é™¤ï¼ˆå¦‚è°ƒç”¨ localStorage.clear() æˆ–æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼‰ï¼Œå¦åˆ™æ•°æ®ä¸€ç›´å­˜åœ¨ã€‚
è·¨é¡µé¢é€šä¿¡ï¼šå¤šä¸ªåŒæºé¡µé¢å¯ä»¥è®¿é—®åŒä¸€ä¸ª localStorageï¼Œé€‚åˆç”¨äºŽç”¨æˆ·ç™»å½•çŠ¶æ€ã€ä¸»é¢˜è®¾ç½®ç­‰é•¿æœŸæœ‰æ•ˆçš„æ•°æ®ã€‚
ç¤ºä¾‹ï¼šè´­ç‰©è½¦ä¿¡æ¯ã€ç”¨æˆ·åå¥½è®¾ç½®ã€è®°ä½å¯†ç åŠŸèƒ½ç­‰ã€‚
âœ… sessionStorage
ä¸´æ—¶æ€§ï¼šä»…åœ¨å½“å‰ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå½“ç”¨æˆ·å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µæˆ–çª—å£åŽï¼Œæ•°æ®ä¼šè¢«è‡ªåŠ¨æ¸…é™¤ã€‚
ç‹¬ç«‹æ€§ï¼šå³ä½¿æ‰“å¼€å¤šä¸ªåŒæºé¡µé¢ï¼Œæ¯ä¸ªé¡µé¢çš„ sessionStorage éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚
ç¤ºä¾‹ï¼šè¡¨å•å¡«å†™ä¸­é€”æš‚å­˜ã€ä¸€æ¬¡æ€§éªŒè¯ç ã€ä¸´æ—¶ Token ç¼“å­˜ç­‰ã€‚

# ä½¿ç”¨æ’ä»¶æ¥ç®¡ç†
```
å®‰è£…æ’ä»¶ 
npm install pinia-plugin-persistedstate 
```

```
åœ¨ main.ts ä¸­å¼•å…¥å¹¶ä½¿ç”¨æ’ä»¶
const pinia = createPinia();
pinia.use(piniaPluginPersistedstate)
app.use(pinia)
```

```
é…ç½®éœ€è¦æŒä¹…åŒ–çš„storeï¼Œè§ shop.ts
    //é»˜è®¤æ–¹å¼
     persist: true //å¯ç”¨æŒä¹…åŒ–

    //æŒ‡å®škeyã€å­˜å‚¨æ–¹å¼
     persist: {
         storage: sessionStorage, // ä½¿ç”¨ session å­˜å‚¨
         key: 'my_shop_key'        // è‡ªå®šä¹‰ localStorage é”®å
    }

    //æŒ‡å®škeyã€å­˜å‚¨æ–¹å¼ã€ç­›é€‰æ•°æ®
    persist: {
        storage: localStorage,
        getItemKey: (id) => `shopStore_${id}`, // è‡ªå®šä¹‰ key åï¼Œæ­¤apiå·²ç»å¤±æ•ˆï¼ŒæŽ¨èä½¿ç”¨  key: 'my_shop_key'
        filter: ({ store }) => {
            return {
                shop: store.shop
            }
        }
    }
```

